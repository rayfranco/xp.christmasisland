(function(){var t;t=function(){function t(){}return t}()}).call(this),function(){var t;t=function(){function t(){}return t}()}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};if("undefined"==typeof $||null===$)throw"jQuery is not installed";$(function(){var t,n,i,o,s,a,r,u,l,c,h,d,p,m,E,f,y,w,g,T,v,z,k;if(c=.5,m=new THREE.Scene,s=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),E=document.getElementById("scene"),p=new THREE.WebGLRenderer({canvas:E}),p.setSize(window.innerWidth,window.innerHeight),r=new THREE.SphereGeometry(50,16,16),l=new THREE.MeshLambertMaterial({color:16711680}),a=new THREE.Mesh(r,l),a.position=new THREE.Vector3(0,0,0),m.add(a),v=document.getElementById("trackerCanvas"),z=document.getElementById("trackerVideo"),u=new headtrackr.Tracker({ui:!1,headPosition:!0,calcAngles:!1}),u.init(z,v),u.start(),h=new THREE.PointLight(255),h.position.x=10,h.position.y=50,h.position.z=130,m.add(h),s.position.z=500,s.position.y=50,s.lookAt(a.position),n=function(){function e(e,n,i){var o,s,a,r;for(this.scene=e,this.subject=n,this.count=i,this.flakes=new THREE.Geometry,this.material=new THREE.ParticleBasicMaterial({size:2,map:THREE.ImageUtils.loadTexture("assets/particle.png"),blending:THREE.AdditiveBlending,depthTest:!1,transparent:!0}),this.points=new THREE.GeometryUtils.randomPointsInGeometry(this.subject,this.count),o=a=0,r=this.count;r>=0?r>a:a>r;o=r>=0?++a:--a)s=new t(this.points[o],10),s.explode(),this.flakes.vertices.push(s);return this.system=new THREE.ParticleSystem(this.flakes,this.material),console.log(this.flakes),this.system.sortParticles=!0,console.log(this.flakes),this.scene.add(this.system),console.log(this.flakes),this}return e.prototype.flake=function(){var t,e,n,i,o;for(i=this.flakes.vertices,o=[],e=0,n=i.length;n>e;e++)t=i[e],o.push(t.flake());return o},e.prototype.explode=function(){var t,e,n,i;for(i=this.flakes.vertices,e=0,n=i.length;n>e;e++)t=i[e],t.explode(2500).animate();return this.onAnimationEnd(),this},e.prototype.implode=function(){var t,e,n,i;for(i=this.flakes.vertices,e=0,n=i.length;n>e;e++)t=i[e],t.implode(1500).animate();return this.onAnimationEnd(),this},e.prototype.onAnimationEnd=function(){},e}(),t=function(t){function n(t,e){return null==e&&(e=2),this.velocity=new THREE.Vector3(0,-Math.random()+1,0),this.animation=null,this.x=t.x,this.y=t.y,this.z=t.z,this.implodeSet={x:this.x,y:this.y,z:this.z},this.explodeSet={x:this.x*e,y:this.y*e,z:this.z*e},this}return e(n,t),n.prototype.explode=function(t){return this.animation=new TWEEN.Tween(this).to(this.explodeSet,t).easing(TWEEN.Easing.Cubic.Out),this},n.prototype.implode=function(t){return this.animation=new TWEEN.Tween(this).to(this.implodeSet,t).easing(TWEEN.Easing.Cubic.In),this},n.prototype.flake=function(){return-200>this.y&&(this.y=200),this.addSelf(this.velocity),this},n.prototype.animate=function(){return this.animation&&this.animation.start(),this},n}(THREE.Vector3),i=1500,y=new n(m,r,i),o=1,$(document).click(function(){return 1===o?(y.explode(),o=0):(y.implode(),o=1)}),"undefined"==typeof buzz||null===buzz)throw"Buzz is not installed";return f={preload:!0,autoplay:!1,loop:!0},w=new buzz.sound("assets/loop1.wav",f),g=new buzz.sound("assets/loop2.wav",f),T=new buzz.sound("assets/loop3.wav",f),buzz.all().bindOnce("canplaythrough",function(){return console.log("canplaythrough"),buzz.all().play()}),w.setVolume(100),g.setVolume(20),T.setVolume(0),buzz.all(),d=function(){return TWEEN.update(),y.system.rotation.y+=.01,requestAnimationFrame(d),p.render(m,s)},d(),k={getUserMedia:"You got that camera","no getUserMedia":"u shy ? Turn that camera on...","camera found":"Camera is working","no camera":"Hey, u dat shy ?",detecting:"Don't hide, tryin to find u...",found:"Gotcha ! You can move now :)",lost:"Hey !! Where are ya ??",redetecting:"Tryin to find you again"},document.addEventListener("headtrackrStatus",function(t){return t.status in k?console.log(k[t.status]):void 0}),document.addEventListener("facetrackingEvent",function(t){var e,n;return e=c=t.x/320,n=t.y/240,new TWEEN.Tween(s.position).to({x:200*-e,y:200*n},980).easing(TWEEN.Easing.Cubic.Out).onUpdate(function(){}).start(),w.setVolume(100*e),g.setVolume(100-100*e),T.setVolume(100-150*e)}),window.camera=s})}.call(this);